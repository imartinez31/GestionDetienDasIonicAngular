<ion-header>
  <ion-toolbar>
    <ion-title>{{ isEditMode ? 'Editar Producto' : 'Nuevo Producto' }}</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="cancel()">Cancelar</ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <form [formGroup]="productForm" (ngSubmit)="save()">
    <ion-item>
      <ion-label position="stacked">Nombre del Producto</ion-label>
      <ion-input type="text" formControlName="name" placeholder="Ingrese el nombre"></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="productForm.get('name')?.invalid && productForm.get('name')?.touched">
      <small>El nombre es requerido</small>
    </ion-text>

    <ion-item>
      <ion-label position="stacked">Descripción</ion-label>
      <ion-textarea formControlName="description" placeholder="Ingrese la descripción" rows="3"></ion-textarea>
    </ion-item>
    <ion-text color="danger" *ngIf="productForm.get('description')?.invalid && productForm.get('description')?.touched">
      <small>La descripción es requerida</small>
    </ion-text>

    <ion-item>
      <ion-label position="stacked">Cantidad/Existencias</ion-label>
      <ion-input type="number" formControlName="quantity" placeholder="0"></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="productForm.get('quantity')?.invalid && productForm.get('quantity')?.touched">
      <small>La cantidad debe ser mayor o igual a 0</small>
    </ion-text>

    <ion-item>
      <ion-label position="stacked">Precio de Costo</ion-label>
      <ion-input type="number" formControlName="costPrice" placeholder="0.00" step="0.01"></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="productForm.get('costPrice')?.invalid && productForm.get('costPrice')?.touched">
      <small>El precio de costo debe ser mayor o igual a 0</small>
    </ion-text>

    <ion-item>
      <ion-label position="stacked">Precio de Venta</ion-label>
      <ion-input type="number" formControlName="salePrice" placeholder="0.00" step="0.01"></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="productForm.get('salePrice')?.invalid && productForm.get('salePrice')?.touched">
      <small>El precio de venta debe ser mayor o igual a 0</small>
    </ion-text>

    <ion-item>
      <ion-label position="stacked">URL/Imagen del Producto</ion-label>
      <ion-input type="url" formControlName="imageUrl" placeholder="https://ejemplo.com/imagen.jpg"></ion-input>
    </ion-item>
    <ion-text color="danger" *ngIf="productForm.get('imageUrl')?.invalid && productForm.get('imageUrl')?.touched">
      <small>La URL de la imagen es requerida</small>
    </ion-text>

    <ion-button expand="block" type="submit" [disabled]="productForm.invalid" class="ion-margin-top">
      {{ isEditMode ? 'Actualizar' : 'Guardar' }}
    </ion-button>
  </form>
</ion-content>
